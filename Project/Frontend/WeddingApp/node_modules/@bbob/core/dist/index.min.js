!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@bbob/parser")):"function"==typeof define&&define.amd?define(["exports","@bbob/parser"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).BbobCore={},e.parser)}(this,function(e,r){"use strict";let t=e=>"object"==typeof e,n=e=>"boolean"==typeof e;function o(e,r){let n=e;if(Array.isArray(n))for(let s=0;s<n.length;s++)n[s]=o(r(n[s]),r);else n&&t(n)&&n.content&&o(n.content,r);return n}function s(e,r){return typeof e==typeof r&&(t(e)&&null!==e?Array.isArray(e)?e.every(e=>[].some.call(r,r=>s(e,r))):Object.keys(e).every(o=>{let i=r[o],f=e[o];return t(f)&&null!==f&&null!==i?s(f,i):n(f)?f!==(null===i):i===f}):e===r)}function i(e,r){return Array.isArray(e)?o(this,t=>{for(let n=0;n<e.length;n++)if(s(e[n],t))return r(t);return t}):o(this,t=>s(e,t)?r(t):t)}function f(e){return o(this,e)}e.default=function(e){let t="function"==typeof e?[e]:e||[],n={skipParse:!1};return{process(e,s){n=s||{};let u=n.parser||r.parse,l=n.render,a=n.data||null;if("function"!=typeof u)throw Error('"parser" is not a function, please pass to "process(input, { parser })" right function');let p=n.skipParse?e||[]:u(e,n),c=p;return p.messages=[],p.options=n,p.walk=f,p.match=i,t.forEach(e=>{p=e(p,{parse:u,render:l,iterate:o,match:i,data:a})||p}),{get html(){if("function"!=typeof l)throw Error('"render" function not defined, please pass to "process(input, { render })"');return l(p,p.options)},tree:p,raw:c,messages:p.messages}}}},Object.defineProperty(e,"__esModule",{value:!0})});
